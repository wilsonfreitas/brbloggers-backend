+++
title = "Top 10 dicas do Curso R de ver√£o 2017"
date = "2017-04-08"
categories = ["curso-r"]
+++

<div><p class="text-muted text-uppercase mb-small text-right"> Por <a href="http://curso-r.com/author/athos">Athos</a> 08/04/2017 </p><div id="post-content"> <p>Em fevereiro desse ano ministramos o Curso de R de Ver&#xE3;o 2017, parte do programa dos Cursos de Ver&#xE3;o do IME-USP. Abaixo segue um compilado das 10 melhores dicas dadas durante este curso.</p>
<div id="conheca-e-domine-a-filosofia-por-tras-do-tidyverse" class="section level3"> <p>O conceito &#x201C;tidy&#x201D; deu o oriente do curso de ver&#xE3;o e n&#xE3;o foi &#xE0; toa: o <em>tidyverse</em>, carinhosamente chamado de &#x201C;universo arrumadinho&#x201D;, est&#xE1; intimamente associado ao dia-a-dia de um analista de dados e sua implementa&#xE7;&#xE3;o em R &#xE9; tida como uma pequena revolu&#xE7;&#xE3;o para os R-eiros.</p>
<p>A postagem <a href="http://curso-r.com/blog/2017/02/15/2017-02-16-manifesto-tidy/">Manifesto Tidy</a> resume bem os motivos pelos quais valem a pena aprender os princ&#xED;pios e os pacotes do <em>tidyverse</em>.</p>
</div>
<div id="r-shiny-e-uma-grande-alternativa-as-ferramentas-de-bi-e-dashboards" class="section level3"> <p>Se voc&#xEA; ainda tem alguma d&#xFA;vida sobre o poder do R em montar dashboards interativos, se d&#xEA; a chance de visitar alguns exemplos:</p>
<ul>
<li><a href="http://pollingdata.com.br/">Polling Data</a></li>
<li><a href="http://shiny.platipus.com.br:3838/platipus/viscarf5">VisCARF</a></li>
<li><a href="https://rich.shinyapps.io/college_map/">College Map</a></li>
<li><a href="https://gallery.shinyapps.io/087-crandash/">CRAN Dash</a></li>
</ul>
<p>Esses exemplos mostram que &#xE9; poss&#xED;vel fazer desde simples gr&#xE1;ficos de barras at&#xE9; sofisticados mapas a l&#xE1; Google Maps. Esse potencial &#xE9; imenso e tudo isso est&#xE1; a disposi&#xE7;&#xE3;o de um mero mortal (e n&#xE3;o mais apenas de um desenvolvedor de software especialista em web).</p>
<p>E quando digo que o potencial &#xE9; imenso, pode acreditar. O shiny coloca a disposi&#xE7;&#xE3;o ao mesmo tempo in&#xFA;meros pacotes JavaScript de visualiza&#xE7;&#xE3;o e o R inteiro, interagindo entre si e aceitando receber informa&#xE7;&#xE3;o de usu&#xE1;rios em tempo real.</p>
<p>PS: todos esses sites de exemplo foram feitos com R e apenas R, nenhum outro conhecimento foi pr&#xE9;-requisito.</p>
<p>Se restou alguma d&#xFA;vida se o R + Shiny &#xE9; uma grande alternativa &#xE0;s ferramentas de BI e Dashboards, por favor jogue nos coment&#xE1;rios para discutirmos!</p>
</div>
<div id="ggplot2-e-tidyr-tem-tudo-a-ver" class="section level3"> <p>A fun&#xE7;&#xE3;o <code>gather()</code> do pacote tidyr &#xE9; frequentemente utilizada para deixar data.frames prontos para serem &#x201C;plotados&#x201D;. Veja um exemplo:</p>
<p><strong>Correla&#xE7;&#xE3;o entre a vari&#xE1;vel <code>mpg</code> versus todas as outras do data.frame <code>mtcars</code>:</strong></p>
<pre class="r"><code>library(tidyr)
library(ggplot2)
library(dplyr) mtcars_para_grafico &lt;- mtcars %&gt;% gather(variavel, valor, -mpg) ggplot(mtcars_para_grafico, aes(x = valor, y = mpg)) + geom_point(aes(colour = variavel), show.legend = FALSE) + geom_smooth(se = FALSE) + facet_wrap(~variavel, scales = &quot;free_x&quot;)</code></pre>
<p><img src="http://curso-r.com/blog/2017-04-08-top10-dicas-verao-2017_files/figure-html/unnamed-chunk-1-1.png" width="864"></p>
<p>Frequentemente o que se quer &#xE9; construir um gr&#xE1;fico do mesmo tipo para diferentes colunas, por isso o <code>gather()</code> &#xE9; &#xFA;til nesses casos. E o <code>facet_wrap()</code> do ggplot2 faz o servi&#xE7;o de construir um gr&#xE1;fico para cada coluna.</p>
</div>
<div id="web-scraping-e-uma-habilidade-visada-no-mercado" class="section level3"> <p>A internet &#xE9; uma fonta riqu&#xED;ssima de dados e s&#xE3;o as t&#xE9;cnicas de <em>web scraping</em> que permite ao analista explorar seu potencial por inteiro. Em resumo, <em>Web scraping</em> &#xE9; o ato de &#x201C;raspar&#x201D; dados dispon&#xED;veis em sites da internet.</p>
<p>Os dados s&#xE3;o o principal ingrediente para um bom modelo estat&#xED;stico e faz parte da responsabilidade do cientista de dados utilizar o m&#xE1;ximo de informa&#xE7;&#xE3;o dispon&#xED;vel.</p>
<p>Cada vez mais as empresas est&#xE3;o reconhecendo o valor que os dados dispon&#xED;veis publicamente na internet t&#xEA;m. H&#xE1; empresas especializadas nisso e n&#xE3;o &#xE9; raro encontrar freelances envolvendo extra&#xE7;&#xE3;o e estrutura&#xE7;&#xE3;o de dados espalhados na rede.</p>
<p>Os profissinais capazes de encarar esses desafios ainda s&#xE3;o esca&#xE7;os, ent&#xE3;o fica a dica! <a href="https://www.youtube.com/watch?v=o2fFUw8aSHE">Esse webinar</a> dado pelo nosso professor Julio Trecenti &#xE9; um bom ponto de partida para aprender como fazer <em>web scraping</em> no R.</p>
</div>
<div id="avalie-muito-bem-o-problema-antes-de-decidir-que-se-trata-de-um-problema-de-big-data" class="section level3"> <p>Big Data &#xE9; um termo que ainda procura por uma defini&#xE7;&#xE3;o oficial, mas j&#xE1; existe uma classe de obst&#xE1;culos que s&#xE3;o devidos a grandes volumes de dados. Ent&#xE3;o a pergunta primordial aqui &#xE9;: como saber se seu problema &#xE9; de Big Data?</p>
<blockquote>
<p>&#x201C;Big data is extremely overhyped and not terribly well defined. Many people think they have big data, when they actually don&#x2019;t.&#x201D; - Hadley Wickham</p>
</blockquote>
<p>Como Hadley Wickham aponta, muitas pessoas acham que possuem um problema de big data quando na verdade n&#xE3;o possuem. Ele resume o problema em tr&#xEA;s classes distintas:</p>
<ol>
<li>Problema de Big Data que na verdade &#xE9; um problema comum se for feita uma amostragem/sumariza&#xE7;&#xE3;o apropriada.
<ul>
<li>Ferramentas apropriadas: hive, impala, terada, dplyr.</li>
<li>90% dos problemas.</li>
</ul></li>
<li>Problema de Big Data que na verdade s&#xE3;o v&#xE1;rios problemas comuns. Exemplo: ajustar um modelo de regress&#xE3;o por indiv&#xED;duo, para milhares ou milh&#xF5;es de indiv&#xED;duos.
<ul>
<li>Paraleliza&#xE7;&#xE3;o &#xE9; o que ser&#xE1; necess&#xE1;rio.</li>
<li>Ferramentas: foreach, doParallel, doMC, Spark, Hadoop.</li>
<li>9% dos problemas.</li>
</ul></li>
<li>Problemas de Big Data que realmente dependem de todos os dados juntos no mesmo lugar.
<ul>
<li>Exemplo: sistemas de recomenda&#xE7;&#xE3;o em que se faz necess&#xE1;rio a procura de rela&#xE7;&#xF5;es bem raras e espec&#xED;ficas entre transa&#xE7;&#xF5;es.</li>
<li>Ferramentas: geralmente sistemas dedicados e pr&#xF3;prios para o problema.</li>
<li>1% dos problemas.</li>
</ul></li>
</ol>
<p>E quanto ao tamanho do dado propriamente dito, para n&#xF3;s usu&#xE1;rios de R a regra de bolso &#xE9; simples:</p>
<ul>
<li>Se seus dados cabem na mem&#xF3;ria, ent&#xE3;o &#xE9; &#x201C;small data&#x201D;.</li>
</ul>
</div>
<div id="saber-pedir-ajuda-e-o-topico-mais-importante" class="section level3"> <p>Por mais completo que seja um curso de R, nunca algu&#xE9;m chegar&#xE1; no ponto em que n&#xE3;o restar&#xE1; d&#xFA;vidas sobre como fazer alguma coisa no R, at&#xE9; porque h&#xE1; novidades a cada minuto no mundo do R. Por isso aprender a pedir ajuda &#xE9; essencial. No curso foram passados os melhores jeitos de se obter ajuda:</p>
<ul>
<li>Help / documenta&#xE7;&#xE3;o do R (comandos <code>help(funcao)</code> ou <code>?funcao</code>)</li>
<li>Google</li>
<li>Stack Overflow</li>
<li>Coleginha</li>
</ul>
<p>Usem e abusem do fato de a comunidade R ser gigante e ativa.</p>
</div>
<div id="rmarkdown-e-github-vao-bem-no-dia-a-dia-do-r-eiro" class="section level3"> <p>A palavra de ordem aqui &#xE9; <strong>Organiza&#xE7;&#xE3;o</strong>. RMarkdown ajuda a organizar melhor as ideias e conte&#xFA;dos e o Github ajuda a organizar melhor os c&#xF3;digos.</p>
<p>Refer&#xEA;ncia para voc&#xEA; aprender as ferramentas:</p>
<p><a href="http://rmarkdown.rstudio.com/"><strong>RMarkdown</strong></a>, de autoria do nosso querid&#xED;ssimo RStudio Inc., transforma rascunho de c&#xF3;digos em documentos apresent&#xE1;veis. Como j&#xE1; dito antes, todas as postagens deste blog s&#xE3;o feitas em RMarkdown.</p>
<p><a href="http://github.com/"><strong>Github</strong></a> oferece uma intelig&#xEA;ncia sobre o versionamento dos c&#xF3;digos de um projeto. Isso permite que diversos colaboradores n&#xE3;o se percam nas milhares de contribui&#xE7;&#xF5;es. N&#xE3;o existir&#xE3;o mais os <code>arquivos_final_final_v5_com_novas_analises_definitivo3.docx</code> e voc&#xEA; ganhar&#xE1; no controle de quem, quando e o que foi alterado em cada uma das vers&#xF5;es.</p>
<p>Hoje em dia ele &#xE9; amplamente utilizado por empresas de tecnologia e est&#xE1; sendo cada vez mais comum em equipes de empresas mais tradicionais.</p>
</div>
<div id="aprenda-regex" class="section level3"> <p><strong>Reg</strong>ular <strong>Ex</strong>pressions servem para descrever padr&#xF5;es de textos. Por exemplo, para pedir para o R encontrar &#x201C;todas as palavras que comecem com a letra A&#x201D; em <em>regex</em> escrevemos <code>str_detect(palavras, &quot;^A&quot;)</code>. O pequeno peda&#xE7;o de s&#xED;mbolos <code>&quot;^A&quot;</code> &#xE9; a maneira de traduzir em regex o padr&#xE3;o &#x201C;palavras que come&#xE7;am em A&#x201D;.</p>
<p>Para quem quiser se aprofundar no assunto, consulte a documenta&#xE7;&#xE3;o do regex no R: <code>?regex</code>.</p>
<p>Os pacotes <code>stringi</code> e <code>stringr</code> tiram proveito do <em>regex</em> e valem a pena serem explorados! Data mining passar&#xE1; a ser mam&#xE3;o com a&#xE7;&#xFA;car.</p>
</div>
<div id="de-preferencia-aos-funcionais-em-vez-de-fors" class="section level3"> <p>Na postagem <a href="http://curso-r.com/blog/2017/02/21/2017-02-21-top10-pacotes-para-data-science/">Top 10 pacotes para Data Science</a> foi destacado o pacote <code>purrr</code> e seu impacto ao fim do &#x201C;for&#x201D; nos c&#xF3;digos de R.</p>
<p>&#x201C;Usar funcionais&#x201D; significa usar fun&#xE7;&#xF5;es que aceitam fun&#xE7;&#xF5;es como argumentos. Ambos os exemplos abaixo geram uma tabela para cada coluna do data.frame <code>iris</code>:</p>
<p><strong>vers&#xE3;o sem funcionais</strong></p>
<pre class="r"><code>tabelas1 &lt;- list()
nomes_iris &lt;- names(iris)
for(i in 1:length(iris)){ tabelas1[[nomes_iris[i]]] &lt;- table(iris[,i])
}</code></pre>
<p><strong>vers&#xE3;o com funcionais</strong></p>
<pre class="r"><code>tabelas2 &lt;- purrr::map(iris, table)</code></pre>
<p>Do exemplo acima notamos que:</p>
<ul>
<li>h&#xE1; um grande ganho de legibilidade do c&#xF3;digo usando o funcional <code>map()</code> em vez de um <code>for</code>.</li>
<li>n&#xE3;o foi preciso nenhum objeto auxiliar como <code>tabelas1 &lt;- list()</code> e <code>nomes_iris</code> no segundo exemplo.</li>
<li>n&#xE3;o h&#xE1; resqu&#xED;cios de &#xED;ndices como o <code>i</code> para percorrer vetores.</li>
</ul>
<p>Quanto mais aptid&#xE3;o em funcionais um usu&#xE1;rio tiver, mais &#xE1;gil e produtivo ele ser&#xE1;. Ent&#xE3;o aprendam funcionais!</p>
</div>
<div id="coloque-seus-codigos-em-funcoes" class="section level3"> <p>Colocar peda&#xE7;os de c&#xF3;digos, longos ou curtos, beneficia o desenvolvimento, a leitura e a manuten&#xE7;&#xE3;o do c&#xF3;digo. No R, fazer fun&#xE7;&#xE3;o &#xE9; simples e sem burocracia, ent&#xE3;o n&#xE3;o h&#xE1; muito argumento para n&#xE3;o fazer! Algumas dicas para identificar quando voc&#xEA; precisa criar uma fun&#xE7;&#xE3;o:</p>
<ul>
<li>Excesso de CTRL+C/CTRL+V da mesma coisa no c&#xF3;digo, &#x201C;s&#xF3; mudando umas coisinhas&#x201D;. Essas &#x201C;coisinhas&#x201D; que mudam seriam os argumentos da sua fun&#xE7;&#xE3;o.</li>
<li>Projetos distintos reutilizando partes de c&#xF3;digo de um projeto mais antigo.</li>
<li>Um bloco de c&#xF3;digo faz uma tarefa muito bem definida e que daria para colocar um nome para ela. Por exemplo, suponha que <code>x &lt;- c(1:10)</code>. Seria melhor de entender <code>x %&gt;% eh_par</code> do que <code>x %% 2 == 0</code>.</li>
</ul>
</div> </div></div>
